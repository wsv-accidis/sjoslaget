<h1>
	Administration
</h1>

<div class="admin-menu">
	<glyph icon="exit_to_app"></glyph>
	<a href="javascript:" (click)="logOut()">Logga ut</a>
</div>

<p>
	Aktuell kryssning är <span>{{ null != cruise ? cruise.name : '(Laddar...)' }}</span> och bokningen är <span>{{ cruiseIsLocked ? 'stängd' : 'öppen' }}</span>.
	Välj ur menyn ovan eller se nedan för nyligen skapade eller	uppdaterade bokningar som behöver kontrolleras.
</p>

<h2 class="recently-updated-bookings-title">
	Senaste bokningar
</h2>

<spinner-widget *ngIf="isLoadingBookings"></spinner-widget>

<table cellpadding="0" cellspacing="0" border="0" class="recently-updated-bookings" *ngIf="!isLoadingBookings">
	<th>
		Referens
	</th>
	<th>
		Kontaktperson
	</th>
	<th>
		Hytter
	</th>
	<th>
		Deltagare
	</th>
	<th>
		Uppdaterad
	</th>
	<tr *ngFor="let booking of recentlyUpdatedBookings; let p = index">
		<td>
			<a [routerLink]="['Booking', {'ref': booking.reference}]">
				{{ booking.reference }}
			</a>
		</td>
		<td>
			<a [routerLink]="['Booking', {'ref': booking.reference}]">
				{{ booking.firstName }} {{ booking.lastName }}
			</a>
		</td>
		<td>
			{{ booking.numberOfCabins }}
		</td>
		<td>
			{{ booking.numberOfPax }}
		</td>
		<td>
			{{ booking.sinceUpdated }}
		</td>
	</tr>
</table>

<h2 class="available-cabins-title">
	Lediga hytter just nu
</h2>

<spinner-widget *ngIf="isLoadingCabins"></spinner-widget>

<table cellpadding="0" cellspacing="0" border="0" class="available-cabins" *ngIf="!isLoadingCabins">
	<tr>
		<th>
			Typ
		</th>
		<th>
			Lediga
		</th>
		<th></th>
	</tr>
	<tr *ngFor="let cabin of cabins">
		<td>
			{{ cabin.name }}
		</td>
		<td>
			{{ getAvailability(cabin.id) }}
		</td>
		<td class="available-cabins-progress">
			<material-progress [activeProgress]="getAvailability(cabin.id)" [max]="cabin.count">
			</material-progress>
		</td>
	</tr>
</table>

<h2 class="cruise-title">Kryssning</h2>

<spinner-widget *ngIf="isLoadingCruise"></spinner-widget>

<material-button *ngIf="!cruiseIsLocked && !isLoadingCruise"
				 class="control-red"
				 raised
				 (trigger)="lockUnlockCruise()">
	Stäng bokningen
</material-button>

<material-button *ngIf="cruiseIsLocked && !isLoadingCruise"
				 class="control-green"
				 raised
				 (trigger)="lockUnlockCruise()">
	Öppna bokningen
</material-button>

<div style="clear: both; height: 40px"></div>
