<h1>
	{{ null != booking ? 'Hej, ' + booking.firstName + '!' : 'Hej!' }}
</h1>

<p *ngIf="hasQueueStats">
	Du har nummer <strong>{{ queueStats.queueNo }}</strong> i bokningskön och
	fick in din bokning <strong>{{ queueStats.queueLatency }}</strong> efter att bokningen öppnade.
	<span *ngIf="queueStats.isEarlyBooking">Eftersom du fick in din bokning tidigt är dina chanser goda att få
	de platser och boenden du föredrar - go crazy!</span>
	<span *ngIf="queueStats.isLateBooking">Eftersom du fick in din bokning lite senare än flertalet föreslår
	vi att du accepterar ett större spann av boenden, så ökar dina chanser. Skriv gärna om du accepterar att laget
	blir uppdelat på flera stugor, ifall andra lag har ströplatser över.</span>
</p>

<p *ngIf="hasCredentials">
	Din bokningsreferens är <span class="credentials">{{ credentials.reference }}</span> och din PIN-kod är <span class="credentials">{{ credentials.password }}</span>.
	Skriv ner dessa, du kommer att behöva dem senare.
</p>

<p *ngIf="isReadOnly">
	Din bokning är nu låst för ändringar så att boenden ska kunna tilldelas på ett rättvist sätt. Om du behöver ändra något i sista
	stund, kontakta oss så ska vi se vad vi kan göra.
</p>

<material-expansionpanel *ngIf="!isReadOnly"
						 [expanded]="isNewBooking"
						 flat="true"
						 name="Instruktioner - så här fyller du i (läs först!)"
						 [showSaveCancel]="false">
	<p style="margin-top: 0;">
		Fyll i <strong>Förnamn</strong>, <strong>Efternamn</strong> och <strong>Födelsedatum</strong> på alla lagmedlemmar. Du kan ta bort och lägga till rader
		för att anpassa antalet personer i laget, största möjliga lag är 20 personer. Tomma rader tas bort automatiskt. Det är inte tillåtet att lägga till
		fiktiva personer, placeholders och liknande, dessa tas bort i samband med att stugor tilldelas.
	</p>

	<p>
		Du behöver även välja <strong>Lägsta, Högsta och Önskat boende</strong> för varje lagmedlem. Bäst och enklast är förstås om alla har samma, men det
		är inte nödvändigt. Vi kommer i möjligaste mån att försöka se till så att alla får sitt önskade boende i första hand, därefter gäller först till kvarn.
		Om du kom in lite senare i bokningskön så ökar du dina chanser att få plats ju fler olika boenden du kan acceptera.
	</p>

	<p>
		Längst ned på sidan kan du fylla i <strong>Särskilda önskemål</strong>. Om du vill ha något särskilt boende eller lämna extra information
		till oss så gör du det här. Vi kan förstås inte lova att allt går att lösa, men vi gör vårt bästa!
	</p>

	<p>
		När tilldelningen av stugor har börjat kan du inte längre göra ändringar i bokningen själv utan måste då kontakta oss för alla ändringar. Detta sker
		förmodligen en eller ett par timmar efter att bokningen har öppnat, eftersom Absolut Gotland brukar bli fullbokat snabbt. Håll utkik efter
		uppdaterad information i vårt Facebook-event. <strong>Spara din bokning</strong> ofta under tiden du fyller i.
	</p>

	<p>
		<strong>Skriv upp</strong> den bokningsreferens och PIN-kod som visas ovan, du behöver den när du ska checka in på Kneippbyn.
	</p>
</material-expansionpanel>

<div style="clear: both; height: 20px;"></div>

<p class="super-important loading-error" *ngIf="hasLoadingError">
	{{ loadingError }}
</p>

<form #bookingForm="ngForm">
	<spinner-widget *ngIf="!isLoaded && !hasLoadingError"></spinner-widget>

	<pax-component #pax></pax-component>

	<p class="super-important booking-error" *ngIf="hasBookingError">
		{{ bookingError }}
	</p>

	<div *ngIf="!isReadOnly">
		<div *ngIf="!isSaving">
			<material-button class="control-blue"
							 raised
							 [disabled]="!canAddPax || !isLoaded"
							 (trigger)="addEmptyPax()">
				Lägg till en deltagare
			</material-button>

			<material-button class="control-green"
							 [disabled]="!canSave"
							 raised
							 (trigger)="saveBooking()">
				Spara bokningen
			</material-button>

			<material-button class="control-red"
							 [disabled]="!canSave"
							 raised
							 (trigger)="saveAndExit()">
				Spara bokningen och logga ut mig
			</material-button>
		</div>

		<spinner-widget *ngIf="isSaving"></spinner-widget>
	</div>

	<div *ngIf="isReadOnly" class="booking-logout">
		<material-button class="control-red"
						 raised
						 (trigger)="saveAndExit()">
			Logga ut
		</material-button>
	</div>

	<div *ngIf="isLoaded" class="booking-details">
		<h2>
			Bokningsinformation
		</h2>

		<table>
			<tr>
				<th>
					Lagets namn
				</th>
				<td>
					{{ booking.teamName }}
				</td>
			</tr>
			<tr>
				<th>
					Kontaktperson
				</th>
				<td>
					{{ booking.firstName }} {{ booking.lastName }}
				</td>
			</tr>
			<tr>
				<th>
					Särskilda önskemål
				</th>
				<td *ngIf="isReadOnly">
					{{ booking.specialRequest }}
				</td>
				<td *ngIf="!isReadOnly">
					<material-input [(ngModel)]="booking.specialRequest"
									class="special-request-field"
									[displayBottomPanel]="false"
									label="Särskilda önskemål"
									multiline>
					</material-input>
				</td>
			</tr>
		</table>
	</div>
</form>